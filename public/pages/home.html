<!DOCTYPE html>

<head>
</head>
<div ng-controller="getLocation" data-ng-init="init()">

    <div class="row">
        <form class="form-inline">
            <div class="col-md-1"></div>
            <div class="col-md-3">
                <label>Filter: </label>
                <select name="categorySelect" id="categorySelect" class="form-control"
                        ng-options="cat.name | ampersand for cat in categoriesData.category track by cat.id"
                        ng-model="category"
                        ng-change="search()">
                    <option value="">-- Select Category --</option>
                </select>
            </div>
            <!--<div class="col-md-1"></div>-->
            <div class="col-md-2">
                <label>Sort by: </label>
                <select name="sorting" id="sorting" class="form-control"
                        ng-options="type for type in sortOptions track by type"
                        ng-model="sortOrder"
                        ng-change="search()">
                    <option value="Popularity">-- sort by --</option>
                </select>
            </div>
            <div class="col-md-5">
                <div class="input-group" style="width: 100%">
                    <!--<div class="input-group-addon">Location</div>-->
                    <input type="text" googleplace class="form-control" ng-model="searchQuery" placeholder="Change location">
                </div>
            </div>

            <!--<div class="col-md-1"></div>-->
            <div class="col-md-1">
                <button type="button" class="btn btn-primary active" ng-click="search()">Apply</button>
            </div>
        </form>

    </div>
    <br>
    <div class="row">

        <!-- <p> latitude : {{userlat}} </p>
         <p> longitude : {{userlong}} </p>-->

        <!--<p ng-show="visibility"> Search Query : {{searchQuery}} </p>-->
        <!-- <td> {{ event.latitude }}  </td>
                        <td> {{ event.longitude }}  </td>-->
        <!-- <div class="col-md-1"></div>-->
        <div class="col-md-6" style="max-height: 450px; overflow: auto;" id="eventList">
            <table class="table table-hover table-condensed" style="margin-bottom: 0px;">
                <!--<tr>
                    <th colspan="4"></th>
                    <th>Event</th>
                    <th>Where?</th>
                    <th>When?</th>
                </tr>-->
                <tr ng-repeat="event in eventDetails" ng-click="showEvent(event)">
                    <td style="width: 25%">
                        <div><img ng-src="{{event.image}}" /></div>
                    </td>
                    <td style="width: 75%">
                        <h4> <a href=""> {{ event.title }} </a></h4>
                        <div><i class="fa fa-location-arrow"></i> &nbsp; {{ event.venue_name }}</div>
                        <div>
                            <span> <i class="fa fa-calendar"></i> &nbsp; {{ event.start_time | dateInMillis | date: 'EEE, MMM dd yyyy, h:mm a'}} </span>
                            <span style="padding-left: 200px;">
                                <span><a href=""><i class="fa fa-thumbs-o-up fa-2x"></i></a></span>
                                &nbsp;&nbsp;&nbsp;
                                <span><a href=""><i class="fa fa-thumbs-o-down fa-2x"></i></a></span>
                            </span>
                        </div>
                        <div style="padding-top: 5px;"><span class="label label-success"> {{event.price}} </span></div>
                        <div><span ng-repeat="cat in event.categories"><span class="label label-primary">{{cat.name | ampersand}}</span>   </span></div>
                    </td>
                    <!--<td style="width: 30%"> <br> <span> Where: {{ event.venue_name }} <hr style="margin-top: 10px; margin-bottom: 10px;"> {{ event.start_time }} </span> </td>-->
                </tr>
                <!--<tr>
                    <td style="width: 30%"> <h5> {{ event.start_time }} </h5> </td>
                </tr>-->
            </table>
        </div>

        <div class="col-md-6" id="map" map-lazy-load="http://maps.google.com/maps/api/js">
            <ng-map center="{{where}}" zoom="10" style="height: 450px">
                <marker position = "{{e.latitude}},{{e.longitude}}"
                        ng-repeat="e in eventDetails"
                        on-click="clickEventInfo(event,e)">
                </marker>
                <info-window id="map-event" position="{{mapEvent.latitude}},{{mapEvent.longitude}}">
                    <div ng-non-bindable="">
                        <!--Event: {{mapEvent.title}}<br>
                        Where?: {{mapEvent.venue_name}}<br>
                        When?: {{mapEvent.start_time}}-->
                        <h4> <a> {{ mapEvent.title }} </a></h4>
                        <div> Venue: {{ mapEvent.venue_name }} </div>
                        <div> {{ mapEvent.start_time }} </div>
                        <div class="label label-success"> {{mapEvent.price}} </div>
                        <!--<div><span ng-repeat="cat in mapEvent.categories"><span class="label label-primary">{{cat.name | ampersand}}</span>   </span></div>-->
                    </div>
                </info-window>
                <marker position="current-location"
                        icon="images/me.png"></marker>
                <!--<info-window id="foo" position="current-location">
                    <div ng-non-bindable="">
                        <div>
                            Hi, You are here!
                        </div>
                    </div>
                </info-window>-->
            </ng-map>
        </div>
        <!-- <div class="col-md-1"></div> -->

        <!--   <div class="col-md-3">
               <pre ng-show="visibility"> {{eventDetails | json}}</pre>
           </div> -->

    </div>
</div>